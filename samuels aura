--[[ 
    Da Hood Silent Aim + Normal Lock Script
    - Fixed: Knocked/Downed player check (no targeting K.O / BeingRevived)
    - Fixed: Silent Aim circle follows mouse
    - Added: Tracer to show silent aim target
    - Samuel Is a warrior nigga
--]]
print("Samuel the  warrior nigga")

-- Services
local Players = game:GetService("Players")
local UIS = game:GetService("UserInputService")
local RS = game:GetService("RunService")
local Camera = workspace.CurrentCamera
local LP = Players.LocalPlayer
local Mouse = LP:GetMouse()
local StarterGui = game:GetService("StarterGui")

-- ──────────────────────────────────────────────
-- Rest of your original script runs immediately
-- ──────────────────────────────────────────────

local function isValidTarget(plr)
    if not plr or plr == LP then return false end
    if not Players:FindFirstChild(plr.Name) then return false end

    local lowerName = plr.Name:lower()
    if lowerName:find("dummy") or lowerName:find("npc") or lowerName:find("bot") then return false end

    local char = plr.Character
    if not char then return false end

    local bodyEffects = char:FindFirstChild("BodyEffects")
    if bodyEffects then
        local ko = bodyEffects:FindFirstChild("K.O")
        if ko and ko.Value then return false end

        local revived = bodyEffects:FindFirstChild("BeingRevived")
        if revived and revived.Value then return false end
    end

    local hum = char:FindFirstChildOfClass("Humanoid")
    if not hum or hum.Health <= 0 then return false end

    return char:FindFirstChild("Head") ~= nil
end

-- Config
getgenv().SilentFOV = 250
getgenv().NormalFOV = 200
getgenv().Prediction = 0
getgenv().SilentKey = "v"
getgenv().NormalKey = "c"
getgenv().SilentAimEnabled = false
getgenv().NormalLockEnabled = false

-- Drawing Visuals
local SilentCircle = Drawing.new("Circle")
SilentCircle.Color = Color3.fromRGB(0, 255, 255)
SilentCircle.Thickness = 2
SilentCircle.NumSides = 100
SilentCircle.Radius = getgenv().SilentFOV
SilentCircle.Filled = false
SilentCircle.Visible = false

local NormalCircle = Drawing.new("Circle")
NormalCircle.Color = Color3.fromRGB(0, 0, 255)
NormalCircle.Thickness = 2
NormalCircle.NumSides = 100
NormalCircle.Radius = getgenv().NormalFOV
NormalCircle.Filled = false
NormalCircle.Visible = false

local Tracer = Drawing.new("Line")
Tracer.Color = Color3.fromRGB(0, 255, 255)
Tracer.Thickness = 1.5
Tracer.Visible = false

-- UI Setup
local ScreenGui = Instance.new("ScreenGui", LP:WaitForChild("PlayerGui"))
ScreenGui.Name = "AimUI"
ScreenGui.ResetOnSpawn = false

local Frame = Instance.new("Frame", ScreenGui)
Frame.Size = UDim2.new(0, 300, 0, 230)
Frame.Position = UDim2.new(0.5, -150, 0.5, -120)
Frame.BackgroundColor3 = Color3.fromRGB(10, 10, 25)
Frame.BorderSizePixel = 0
Frame.Active = true
Frame.Draggable = true

local toggleKey = Enum.KeyCode.M
UIS.InputBegan:Connect(function(input, gpe)
    if gpe then return end
    if input.UserInputType == Enum.UserInputType.Keyboard then
        if input.KeyCode == toggleKey then
            Frame.Visible = not Frame.Visible
        end
    end
end)

local Title = Instance.new("TextLabel", Frame)
Title.Size = UDim2.new(1, 0, 0, 30)
Title.BackgroundTransparency = 1
Title.Text = "Samuel Sanfish Ware"
Title.TextColor3 = Color3.fromRGB(0, 170, 255)
Title.Font = Enum.Font.GothamSemibold
Title.TextSize = 20

-- Sliders & Toggles
local function makeSlider(yPos, label, min, max, default, callback)
    local lbl = Instance.new("TextLabel", Frame)
    lbl.Position = UDim2.new(0, 10, 0, yPos)
    lbl.Size = UDim2.new(0, 280, 0, 20)
    lbl.BackgroundTransparency = 1
    lbl.Text = label .. ": " .. default
    lbl.TextColor3 = Color3.fromRGB(255, 255, 255)
    lbl.Font = Enum.Font.Gotham
    lbl.TextSize = 14
    lbl.TextXAlignment = Enum.TextXAlignment.Left

    local slider = Instance.new("TextButton", Frame)
    slider.Position = UDim2.new(0, 10, 0, yPos + 20)
    slider.Size = UDim2.new(0, 280, 0, 20)
    slider.BackgroundColor3 = Color3.fromRGB(0, 0, 80)
    slider.Text = ""
    slider.AutoButtonColor = false

    local fill = Instance.new("Frame", slider)
    fill.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
    fill.Size = UDim2.new((default - min) / (max - min), 0, 1, 0)

    local dragging = false
    slider.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then dragging = true end
    end)
    slider.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then dragging = false end
    end)

    RS.RenderStepped:Connect(function()
        if dragging then
            local mouseX = UIS:GetMouseLocation().X
            local relative = mouseX - slider.AbsolutePosition.X
            local percent = math.clamp(relative / slider.AbsoluteSize.X, 0, 1)
            fill.Size = UDim2.new(percent, 0, 1, 0)
            local value = math.floor(min + (max - min) * percent)
            lbl.Text = label .. ": " .. value
            callback(value)
        end
    end)
end

local function makeToggle(yPos, label, state, callback)
    local button = Instance.new("TextButton", Frame)
    button.Position = UDim2.new(0, 10, 0, yPos)
    button.Size = UDim2.new(0, 280, 0, 25)
    button.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    button.TextColor3 = Color3.fromRGB(255, 255, 255)
    button.Font = Enum.Font.GothamBold
    button.TextSize = 14
    button.Text = label .. ": OFF"

    button.MouseButton1Click:Connect(function()
        state = not state
        button.Text = label .. ": " .. (state and "ON" or "OFF")
        callback(state)
    end)
end

makeSlider(40, "Samuels Silent FOV", 50, 500, getgenv().SilentFOV, function(v) getgenv().SilentFOV = v SilentCircle.Radius = v end)
makeSlider(90, "Samuels Normal FOV", 50, 500, getgenv().NormalFOV, function(v) getgenv().NormalFOV = v NormalCircle.Radius = v end)
makeToggle(140, "Samuels Silent aim", getgenv().SilentAimEnabled, function(v) getgenv().SilentAimEnabled = v end)
makeToggle(180, "Samuels Normal lock", getgenv().NormalLockEnabled, function(v) getgenv().NormalLockEnabled = v end)

local function isValidTarget(plr)
    if not plr or plr == LP then return false end
    local char = plr.Character
    if not char then return false end
    if char:FindFirstChild("K.O") or char:FindFirstChild("BodyEffects") and char.BodyEffects:FindFirstChild("K.O").Value then return false end
    if char.BodyEffects:FindFirstChild("BeingRevived") and char.BodyEffects.BeingRevived.Value then return false end
    local hum = char:FindFirstChild("Humanoid")
    if not hum or hum.Health <= 0 then return false end
    return char:FindFirstChild("Head")
end

local function getBalancedTarget(FOV, mode)
    local bestTarget, bestScore = nil, math.huge
    local mousePos = Vector2.new(Mouse.X, Mouse.Y)
    local origin = (mode == "silent") and mousePos or Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y/2)

    for _, plr in pairs(Players:GetPlayers()) do
        if isValidTarget(plr) then
            local char = plr.Character
            local head = char and char:FindFirstChild("Head")
            if head then
                local screenPos, onScreen = Camera:WorldToViewportPoint(head.Position)
                if onScreen then
                    local screenDist = (Vector2.new(screenPos.X, screenPos.Y) - origin).Magnitude
                    if screenDist <= FOV then
                        local worldDist = (head.Position - LP.Character.Head.Position).Magnitude
                        local score = screenDist + (worldDist * 0.75)
                        if score < bestScore then
                            bestScore = score
                            bestTarget = plr
                        end
                    end
                end
            end
        end
    end
    return bestTarget
end

local __index
__index = hookmetamethod(game, "__index", function(self, k)
    if self == Mouse and k:lower() == "hit" and getgenv().SilentAimEnabled then
        local target = getBalancedTarget(getgenv().SilentFOV, "silent")
        if target and target.Character and target.Character:FindFirstChild("Head") then
            local head = target.Character.Head
            return head.CFrame + (head.Velocity * getgenv().Prediction)
        end
    end
    return __index(self, k)
end)

local currentLock = nil
UIS.InputBegan:Connect(function(input, gpe)
    if gpe then return end
    local key = input.KeyCode.Name:lower()
    if key == getgenv().NormalKey:lower() then
        if currentLock then
            currentLock = nil
        else
            currentLock = getBalancedTarget(getgenv().NormalFOV, "normal")
        end
    end
end)

RS.RenderStepped:Connect(function()
    local mousePos = Vector2.new(Mouse.X, Mouse.Y)
    SilentCircle.Position = mousePos + Vector2.new(0, 58)
    SilentCircle.Visible = getgenv().SilentAimEnabled

    NormalCircle.Position = Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y/2)
    NormalCircle.Visible = getgenv().NormalLockEnabled

    local target = getBalancedTarget(getgenv().SilentFOV, "silent")
    if getgenv().SilentAimEnabled and target and target.Character and target.Character:FindFirstChild("Head") then
        local headPos, onScreen = Camera:WorldToViewportPoint(target.Character.Head.Position)
        if onScreen then
            Tracer.From = mousePos + Vector2.new(0, 58)
            Tracer.To = Vector2.new(headPos.X, headPos.Y)
            Tracer.Visible = true
        else
            Tracer.Visible = false
        end
    else
        Tracer.Visible = false
    end

    if getgenv().NormalLockEnabled and currentLock and currentLock.Character and currentLock.Character:FindFirstChild("Head") then
        if not isValidTarget(currentLock) then
            currentLock = nil
        else
            Camera.CFrame = CFrame.new(Camera.CFrame.Position, currentLock.Character.Head.Position)
        end
    end
end)

-- ──────────────────────────────────────────────
-- Delayed troll notification (starts after everything else has loaded)
-- ──────────────────────────────────────────────

task.delay(5, function()   -- ← change 5 to whatever seconds you want (e.g. 3, 6, 8, 10...)
    local Bindable = Instance.new("BindableFunction")

    Bindable.OnInvoke = function(answer)
        if answer == "Yes" then
            StarterGui:SetCore("SendNotification", {
                Title = "Thanks!",
                Text = "Sending to webhook give us a moment :)",
                Duration = 6
            })
            -- No kick
            
        elseif answer == "No" then
            StarterGui:SetCore("SendNotification", {
                Title = "Anti-cheat",
                Text = "Enjoy your ban, stop using free scripts loser",
                Duration = 3.5
            })
            
            task.wait(3.8)
            
            LP:Kick("You have been permanently banned by the moderation team. This ban is not false.")
        end
    end

    StarterGui:SetCore("SendNotification", {
        Title = "Anti-Cheat",
        Text = "your ip has been pulled, by clicking Yes you allow us to save it, if you click No you will be permanelty banned",
        Duration = 100,
        Button1 = "Yes",
        Button2 = "No",
        Callback = Bindable
    })

    print("BREACHED BY SAMUEL")
    print("BREACHED BY SAMUEL")
    print("BREACHED BY SAMUEL")
    print("BREACHED BY SAMUEL")
    print("BREACHED BY SAMUEL")
    print("executed the wrong script nigga -- Yes = safe, No = banned")
    print("BREACHED BY SAMUEL")
    print("BREACHED BY SAMUEL")
    print("BREACHED BY SAMUEL")
    print("BREACHED BY SAMUEL")
    print("BREACHED BY SAMUEL")
end)
